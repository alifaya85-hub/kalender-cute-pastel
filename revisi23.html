<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kalender Cute Pastel ðŸ’—</title>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(180deg, #ffd1e8, #ffb3d9);
      color: #5a2e3f;
      margin: 0;
      padding: 0;
      text-align: center;
    }
    h1 {
      color: #ff5c8a;
      margin-top: 20px;
      font-size: 2.5em;
      text-shadow: 0 0 8px rgba(255, 150, 180, 0.5);
    }
    .calendar {
      width: 90%;
      max-width: 700px;
      margin: 30px auto;
      background: #ffe0ec;
      border-radius: 20px;
      box-shadow: 0 4px 14px rgba(255, 100, 150, 0.3);
      padding: 20px;
      border: 2px solid #ff8fb7;
    }
    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    button {
      background: #ff8fb7;
      border: none;
      border-radius: 12px;
      padding: 8px 16px;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }
    button:hover {
      background: #ff6f9f;
    }
    .days {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 10px;
      margin-top: 20px;
    }
    .day {
      padding: 12px;
      background: #ffc6dc;
      border-radius: 10px;
      cursor: pointer;
      transition: 0.3s;
      position: relative;
      font-weight: bold;
      color: #a23c5a;
    }
    .day:hover {
      background: #ffb1d0;
      transform: scale(1.08);
    }

    /* tanda love */
    .has-event::after {
      content: "ðŸ’—";
      position: absolute;
      bottom: 4px;
      right: 6px;
      font-size: 14px;
    }

    .popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #ffe6f2;
      border-radius: 20px;
      box-shadow: 0 5px 20px rgba(255, 100, 150, 0.4);
      width: 90%;
      max-width: 400px;
      padding: 20px;
      display: none;
      border: 2px solid #ff8fb7;
    }
    .popup h2 {
      color: #ff5c8a;
      margin-bottom: 10px;
    }
    .event-input {
      margin: 5px 0;
      width: 100%;
      padding: 8px;
      border: 1px solid #ff9dc1;
      border-radius: 10px;
      background: #ffd8e8;
      color: #7a3a52;
    }
    .event-list {
      text-align: left;
      margin-top: 10px;
    }
    .event-item {
      background: #ffd1e3;
      border-radius: 10px;
      margin: 5px 0;
      padding: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: #7a3a52;
    }
    .delete-btn {
      background: #ff7ba3;
      border: none;
      border-radius: 8px;
      color: white;
      padding: 4px 8px;
      cursor: pointer;
    }
    .delete-btn:hover {
      background: #ff5c8a;
    }
    .notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #ffc6db;
      padding: 10px 20px;
      border-radius: 20px;
      color: #ff2f75;
      font-weight: bold;
      animation: fadeInOut 4s ease-in-out;
      border: 2px solid #ff8fb7;
    }
    @keyframes fadeInOut {
      0% {opacity: 0;}
      10%, 90% {opacity: 1;}
      100% {opacity: 0;}
    }
  </style>
</head>
<body>
  <h1>Kalender Cute Pastel ðŸ’—</h1>

  <div class="calendar">
    <div class="calendar-header">
      <button id="prevMonth">â—€</button>
      <h2 id="monthYear"></h2>
      <button id="nextMonth">â–¶</button>
    </div>
    <div class="days" id="daysContainer"></div>
  </div>

  <div class="popup" id="popup">
    <h2 id="popupDate"></h2>
    <input type="time" id="startTime" class="event-input">
    <input type="time" id="endTime" class="event-input">
    <input type="text" id="eventText" class="event-input" placeholder="Tulis kegiatan dan tekan Enter ðŸ’—">
    <div class="event-list" id="eventList"></div>
    <button onclick="closePopup()">Tutup</button>
  </div>

<script>
const daysContainer = document.getElementById("daysContainer");
const monthYear = document.getElementById("monthYear");
const popup = document.getElementById("popup");
const popupDate = document.getElementById("popupDate");
const startTime = document.getElementById("startTime");
const endTime = document.getElementById("endTime");
const eventText = document.getElementById("eventText");
const eventList = document.getElementById("eventList");

let currentDate = new Date();
let events = JSON.parse(localStorage.getItem("cuteCalendarEvents")) || {};
let selectedDate = null;

const months = [
  "Januari","Februari","Maret","April","Mei","Juni",
  "Juli","Agustus","September","Oktober","November","Desember"
];
const days = ["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"];

function renderCalendar() {
  const year = currentDate.getFullYear();
  const month = currentDate.getMonth();
  monthYear.innerText = `${months[month]} ${year}`;

  const firstDay = new Date(year, month, 1).getDay();
  const lastDate = new Date(year, month + 1, 0).getDate();

  daysContainer.innerHTML = "";
  for (let i = 0; i < firstDay; i++) {
    daysContainer.innerHTML += `<div></div>`;
  }
  for (let date = 1; date <= lastDate; date++) {
    const fullDate = `${year}-${month}-${date}`;
    let love = events[fullDate] && events[fullDate].length > 0 ? "has-event" : "";
    daysContainer.innerHTML += `
      <div class="day ${love}" onclick="openPopup(${year}, ${month}, ${date})">${date}</div>`;
  }
}

function openPopup(year, month, date) {
  selectedDate = `${year}-${month}-${date}`;
  const thisDate = new Date(year, month, date);
  const dayName = days[thisDate.getDay()];
  popupDate.innerText = `ðŸ’— ${dayName}, ${date} ${months[month]} ${year}`;
  popup.style.display = "block";
  displayEvents();
}

function displayEvents() {
  eventList.innerHTML = "";
  const dayEvents = events[selectedDate] || [];
  dayEvents.forEach((event, index) => {
    const div = document.createElement("div");
    div.className = "event-item";
    div.innerHTML = `
      <span contenteditable="true" onblur="editEvent(${index}, this)">
        ${event.start} - ${event.end} | ${event.text}
      </span>
      <button class="delete-btn" onclick="deleteEvent(${index})">Hapus</button>
    `;
    eventList.appendChild(div);
  });
}

function editEvent(index, element) {
  const dayEvents = events[selectedDate];
  const [timePart, ...textPart] = element.textContent.split(" | ");
  const [start, end] = timePart.split(" - ");
  dayEvents[index] = { start, end, text: textPart.join(" | ") };
  localStorage.setItem("cuteCalendarEvents", JSON.stringify(events));
  showNotification("âœ¨ Kegiatan diperbarui otomatis ðŸ’—");
}

function deleteEvent(index) {
  events[selectedDate].splice(index, 1);
  localStorage.setItem("cuteCalendarEvents", JSON.stringify(events));
  displayEvents();
  renderCalendar();
}

eventText.addEventListener("keypress", e => {
  if (e.key === "Enter" && eventText.value.trim() !== "") {
    const newEvent = {
      start: startTime.value || "??:??",
      end: endTime.value || "??:??",
      text: eventText.value.trim()
    };
    if (!events[selectedDate]) events[selectedDate] = [];
    events[selectedDate].push(newEvent);
    localStorage.setItem("cuteCalendarEvents", JSON.stringify(events));
    eventText.value = "";
    startTime.value = "";
    endTime.value = "";
    displayEvents();
    renderCalendar();
    showNotification("ðŸ’— Kegiatan tersimpan otomatis!");
  }
});

function closePopup() {
  popup.style.display = "none";
}

function showNotification(msg) {
  const note = document.createElement("div");
  note.className = "notification";
  note.textContent = msg;
  document.body.appendChild(note);
  setTimeout(() => note.remove(), 4000);
}

document.getElementById("prevMonth").onclick = () => {
  currentDate.setMonth(currentDate.getMonth() - 1);
  renderCalendar();
};
document.getElementById("nextMonth").onclick = () => {
  currentDate.setMonth(currentDate.getMonth() + 1);
  renderCalendar();
};

renderCalendar();
</script>

</body>
</html>
